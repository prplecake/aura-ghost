image: alpine/edge
packages:
  - npm
  - zip
sources:
  - https://git.sr.ht/~mjorgensen/aura
tasks:
  - init: |
      sudo npm install -g gscan
  - gscan: |
      which gscan
      gscan aura
  - check-branch: |
      cd aura
      if [ "$(git rev-parse master)" != "$(git rev-parse HEAD)" ]; then \        
        complete-build; \ 
      fi
  - zip: |
      zip -r aura aura --exclude "*/.git*"